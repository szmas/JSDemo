<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
</head>
<body>
    <p>
        三、 location.hash + iframe跨域<br />

        实现原理： a欲与b跨域相互通信，通过中间页c来实现。 三个页面，不同域之间利用iframe的location.hash传值，相同域之间直接js访问来通信。<br />

        具体实现：A域：a.html -> B域：b.html -> A域：c.html，a与b不同域只能通过hash值单向通信，b与c也不同域也只能单向通信，但c与a同域，所以c可通过parent.parent访问a页面所有对象。
    </p>
    <iframe id="iframe" src="http://v.mas.com/location.hash_b.html" style="display:none;"></iframe>
    <script>

        var iframe = document.getElementById('iframe');

        setTimeout(function () {
            iframe.src = iframe.src + "#user=admin";
        }, 1000);


        function onCallback(res) {
            console.log(res);
        }

    </script>
</body>
</html>
